/*
 * Arduino_Beehive_Scale.h
 *
 *  Created on: Oct 4, 2014
 *      Author: nuptse
 */

#ifndef ARDUINO_BEEHIVE_SCALE_H_
#define ARDUINO_BEEHIVE_SCALE_H_

#include <Arduino.h>
#include "Arduino_Beehive_Scale_MBMap.h"

unsigned int holdingRegs[HOLDING_REGS_SIZE]; // function 3 and 16 register array


#ifdef DEBUG

#ifdef SIMU

#define SIMULATIONSINE_NB_STEP 1024

#define SIMULATIONSINE_PERIOD  100

unsigned int simulationSine[SIMULATIONSINE_NB_STEP] = {
		0x15e,0x160,0x162,0x164,0x167,0x169,0x16b,0x16d,
		0x16f,0x171,0x173,0x176,0x178,0x17a,0x17c,0x17e,
		0x180,0x182,0x185,0x187,0x189,0x18b,0x18d,0x18f,
		0x191,0x194,0x196,0x198,0x19a,0x19c,0x19e,0x1a0,
		0x1a2,0x1a4,0x1a7,0x1a9,0x1ab,0x1ad,0x1af,0x1b1,
		0x1b3,0x1b5,0x1b7,0x1b9,0x1bb,0x1be,0x1c0,0x1c2,
		0x1c4,0x1c6,0x1c8,0x1ca,0x1cc,0x1ce,0x1d0,0x1d2,
		0x1d4,0x1d6,0x1d8,0x1da,0x1dc,0x1de,0x1e0,0x1e2,
		0x1e4,0x1e6,0x1e8,0x1ea,0x1ec,0x1ee,0x1f0,0x1f2,
		0x1f4,0x1f6,0x1f8,0x1fa,0x1fc,0x1fd,0x1ff,0x201,
		0x203,0x205,0x207,0x209,0x20b,0x20d,0x20e,0x210,
		0x212,0x214,0x216,0x218,0x219,0x21b,0x21d,0x21f,
		0x221,0x222,0x224,0x226,0x228,0x229,0x22b,0x22d,
		0x22f,0x230,0x232,0x234,0x236,0x237,0x239,0x23b,
		0x23c,0x23e,0x240,0x241,0x243,0x244,0x246,0x248,
		0x249,0x24b,0x24c,0x24e,0x250,0x251,0x253,0x254,
		0x256,0x257,0x259,0x25a,0x25c,0x25d,0x25f,0x260,
		0x262,0x263,0x264,0x266,0x267,0x269,0x26a,0x26b,
		0x26d,0x26e,0x26f,0x271,0x272,0x273,0x275,0x276,
		0x277,0x279,0x27a,0x27b,0x27c,0x27e,0x27f,0x280,
		0x281,0x282,0x284,0x285,0x286,0x287,0x288,0x289,
		0x28a,0x28b,0x28d,0x28e,0x28f,0x290,0x291,0x292,
		0x293,0x294,0x295,0x296,0x297,0x298,0x299,0x29a,
		0x29b,0x29b,0x29c,0x29d,0x29e,0x29f,0x2a0,0x2a1,
		0x2a2,0x2a2,0x2a3,0x2a4,0x2a5,0x2a5,0x2a6,0x2a7,
		0x2a8,0x2a8,0x2a9,0x2aa,0x2aa,0x2ab,0x2ac,0x2ac,
		0x2ad,0x2ae,0x2ae,0x2af,0x2af,0x2b0,0x2b1,0x2b1,
		0x2b2,0x2b2,0x2b3,0x2b3,0x2b4,0x2b4,0x2b5,0x2b5,
		0x2b5,0x2b6,0x2b6,0x2b7,0x2b7,0x2b7,0x2b8,0x2b8,
		0x2b8,0x2b9,0x2b9,0x2b9,0x2b9,0x2ba,0x2ba,0x2ba,
		0x2ba,0x2bb,0x2bb,0x2bb,0x2bb,0x2bb,0x2bb,0x2bb,
		0x2bc,0x2bc,0x2bc,0x2bc,0x2bc,0x2bc,0x2bc,0x2bc,
		0x2bc,0x2bc,0x2bc,0x2bc,0x2bc,0x2bc,0x2bc,0x2bc,
		0x2bc,0x2bb,0x2bb,0x2bb,0x2bb,0x2bb,0x2bb,0x2ba,
		0x2ba,0x2ba,0x2ba,0x2ba,0x2b9,0x2b9,0x2b9,0x2b8,
		0x2b8,0x2b8,0x2b7,0x2b7,0x2b7,0x2b6,0x2b6,0x2b6,
		0x2b5,0x2b5,0x2b4,0x2b4,0x2b3,0x2b3,0x2b2,0x2b2,
		0x2b1,0x2b1,0x2b0,0x2b0,0x2af,0x2af,0x2ae,0x2ad,
		0x2ad,0x2ac,0x2ab,0x2ab,0x2aa,0x2a9,0x2a9,0x2a8,
		0x2a7,0x2a7,0x2a6,0x2a5,0x2a4,0x2a4,0x2a3,0x2a2,
		0x2a1,0x2a0,0x29f,0x29f,0x29e,0x29d,0x29c,0x29b,
		0x29a,0x299,0x298,0x297,0x296,0x295,0x294,0x293,
		0x292,0x291,0x290,0x28f,0x28e,0x28d,0x28c,0x28b,
		0x28a,0x289,0x288,0x286,0x285,0x284,0x283,0x282,
		0x281,0x27f,0x27e,0x27d,0x27c,0x27a,0x279,0x278,
		0x277,0x275,0x274,0x273,0x271,0x270,0x26f,0x26d,
		0x26c,0x26b,0x269,0x268,0x267,0x265,0x264,0x262,
		0x261,0x25f,0x25e,0x25c,0x25b,0x259,0x258,0x256,
		0x255,0x253,0x252,0x250,0x24f,0x24d,0x24c,0x24a,
		0x248,0x247,0x245,0x244,0x242,0x240,0x23f,0x23d,
		0x23b,0x23a,0x238,0x236,0x235,0x233,0x231,0x230,
		0x22e,0x22c,0x22a,0x229,0x227,0x225,0x223,0x222,
		0x220,0x21e,0x21c,0x21a,0x219,0x217,0x215,0x213,
		0x211,0x20f,0x20d,0x20c,0x20a,0x208,0x206,0x204,
		0x202,0x200,0x1fe,0x1fc,0x1fb,0x1f9,0x1f7,0x1f5,
		0x1f3,0x1f1,0x1ef,0x1ed,0x1eb,0x1e9,0x1e7,0x1e5,
		0x1e3,0x1e1,0x1df,0x1dd,0x1db,0x1d9,0x1d7,0x1d5,
		0x1d3,0x1d1,0x1cf,0x1cd,0x1cb,0x1c9,0x1c7,0x1c5,
		0x1c3,0x1c1,0x1bf,0x1bc,0x1ba,0x1b8,0x1b6,0x1b4,
		0x1b2,0x1b0,0x1ae,0x1ac,0x1aa,0x1a8,0x1a6,0x1a3,
		0x1a1,0x19f,0x19d,0x19b,0x199,0x197,0x195,0x192,
		0x190,0x18e,0x18c,0x18a,0x188,0x186,0x184,0x181,
		0x17f,0x17d,0x17b,0x179,0x177,0x175,0x172,0x170,
		0x16e,0x16c,0x16a,0x168,0x166,0x163,0x161,0x15f,
		0x15d,0x15b,0x159,0x156,0x154,0x152,0x150,0x14e,
		0x14c,0x14a,0x147,0x145,0x143,0x141,0x13f,0x13d,
		0x13b,0x138,0x136,0x134,0x132,0x130,0x12e,0x12c,
		0x12a,0x127,0x125,0x123,0x121,0x11f,0x11d,0x11b,
		0x119,0x116,0x114,0x112,0x110,0x10e,0x10c,0x10a,
		0x108,0x106,0x104,0x102,0x100,0xfd,0xfb,0xf9,
		0xf7,0xf5,0xf3,0xf1,0xef,0xed,0xeb,0xe9,
		0xe7,0xe5,0xe3,0xe1,0xdf,0xdd,0xdb,0xd9,
		0xd7,0xd5,0xd3,0xd1,0xcf,0xcd,0xcb,0xc9,
		0xc7,0xc5,0xc3,0xc1,0xc0,0xbe,0xbc,0xba,
		0xb8,0xb6,0xb4,0xb2,0xb0,0xaf,0xad,0xab,
		0xa9,0xa7,0xa5,0xa3,0xa2,0xa0,0x9e,0x9c,
		0x9a,0x99,0x97,0x95,0x93,0x92,0x90,0x8e,
		0x8c,0x8b,0x89,0x87,0x86,0x84,0x82,0x81,
		0x7f,0x7d,0x7c,0x7a,0x78,0x77,0x75,0x74,
		0x72,0x70,0x6f,0x6d,0x6c,0x6a,0x69,0x67,
		0x66,0x64,0x63,0x61,0x60,0x5e,0x5d,0x5b,
		0x5a,0x58,0x57,0x55,0x54,0x53,0x51,0x50,
		0x4f,0x4d,0x4c,0x4b,0x49,0x48,0x47,0x45,
		0x44,0x43,0x42,0x40,0x3f,0x3e,0x3d,0x3b,
		0x3a,0x39,0x38,0x37,0x36,0x34,0x33,0x32,
		0x31,0x30,0x2f,0x2e,0x2d,0x2c,0x2b,0x2a,
		0x29,0x28,0x27,0x26,0x25,0x24,0x23,0x22,
		0x21,0x20,0x1f,0x1e,0x1d,0x1d,0x1c,0x1b,
		0x1a,0x19,0x18,0x18,0x17,0x16,0x15,0x15,
		0x14,0x13,0x13,0x12,0x11,0x11,0x10,0xf,
		0xf,0xe,0xd,0xd,0xc,0xc,0xb,0xb,
		0xa,0xa,0x9,0x9,0x8,0x8,0x7,0x7,
		0x6,0x6,0x6,0x5,0x5,0x5,0x4,0x4,
		0x4,0x3,0x3,0x3,0x2,0x2,0x2,0x2,
		0x2,0x1,0x1,0x1,0x1,0x1,0x1,0x0,
		0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
		0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
		0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x2,
		0x2,0x2,0x2,0x3,0x3,0x3,0x3,0x4,
		0x4,0x4,0x5,0x5,0x5,0x6,0x6,0x7,
		0x7,0x7,0x8,0x8,0x9,0x9,0xa,0xa,
		0xb,0xb,0xc,0xd,0xd,0xe,0xe,0xf,
		0x10,0x10,0x11,0x12,0x12,0x13,0x14,0x14,
		0x15,0x16,0x17,0x17,0x18,0x19,0x1a,0x1a,
		0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x21,
		0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,
		0x2a,0x2b,0x2c,0x2d,0x2e,0x2f,0x31,0x32,
		0x33,0x34,0x35,0x36,0x37,0x38,0x3a,0x3b,
		0x3c,0x3d,0x3e,0x40,0x41,0x42,0x43,0x45,
		0x46,0x47,0x49,0x4a,0x4b,0x4d,0x4e,0x4f,
		0x51,0x52,0x53,0x55,0x56,0x58,0x59,0x5a,
		0x5c,0x5d,0x5f,0x60,0x62,0x63,0x65,0x66,
		0x68,0x69,0x6b,0x6c,0x6e,0x70,0x71,0x73,
		0x74,0x76,0x78,0x79,0x7b,0x7c,0x7e,0x80,
		0x81,0x83,0x85,0x86,0x88,0x8a,0x8c,0x8d,
		0x8f,0x91,0x93,0x94,0x96,0x98,0x9a,0x9b,
		0x9d,0x9f,0xa1,0xa3,0xa4,0xa6,0xa8,0xaa,
		0xac,0xae,0xaf,0xb1,0xb3,0xb5,0xb7,0xb9,
		0xbb,0xbd,0xbf,0xc0,0xc2,0xc4,0xc6,0xc8,
		0xca,0xcc,0xce,0xd0,0xd2,0xd4,0xd6,0xd8,
		0xda,0xdc,0xde,0xe0,0xe2,0xe4,0xe6,0xe8,
		0xea,0xec,0xee,0xf0,0xf2,0xf4,0xf6,0xf8,
		0xfa,0xfc,0xfe,0x101,0x103,0x105,0x107,0x109,
		0x10b,0x10d,0x10f,0x111,0x113,0x115,0x118,0x11a,
		0x11c,0x11e,0x120,0x122,0x124,0x126,0x128,0x12b,
		0x12d,0x12f,0x131,0x133,0x135,0x137,0x13a,0x13c,
		0x13e,0x140,0x142,0x144,0x146,0x149,0x14b,0x14d,
		0x14f,0x151,0x153,0x155,0x158,0x15a,0x15c,0x15e,
};

#endif

void print_debug( unsigned long ulTime, const char * szMessaqe )
{
	if( 0x0000 != holdingRegs[DEBUG_ENABLE] )
	{
		Serial.print(ulTime) ;
		Serial.println(szMessaqe);
	}
}

void print_debug( unsigned long ulTime, unsigned int ui )
{
	if( 0x0000 != holdingRegs[DEBUG_ENABLE] )
	{
		Serial.print(ulTime) ;
		Serial.println(ui);
	}
}

#undef PDEBUG // Just in case
#ifndef PDEBUG
	#define PDEBUG(time, msg) \
		print_debug( time, msg)
#else
	#define PDEBUG(time, msg) /* nothing */
#endif

#endif // DEBUG

#endif /* ARDUINO_BEEHIVE_SCALE_H_ */
